{% extends 'base_admin.html' %}
{% load static %}

{% block title %}游닁 Matr칤cula Anual{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/matricula_anual.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />

<div class="admin-panel">
  <h2 class="titulo-vista">游닁 Matr칤cula Anual</h2>

  <!-- 游꿢 Filtros -->
  <form method="get" class="filtros">
    <div class="form-group">
      <label for="filtroAnio">A침o:</label>
      <select name="anio" id="filtroAnio">
        <option value="Todos">Todos</option>
        {% for anio in anios_lista %}
          <option value="{{ anio }}">{{ anio }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label for="filtroCuatrimestre">Cuatrimestre:</label>
      <select name="cuatrimestre" id="filtroCuatrimestre">
        <option value="Todos">Todos</option>
        <option value="Enero - Abril">Enero - Abril</option>
        <option value="Mayo - Agosto">Mayo - Agosto</option>
        <option value="Septiembre - Diciembre">Septiembre - Diciembre</option>
      </select>
    </div>

    <div class="form-group">
      <label for="filtroPrograma">Tipo de Programa:</label>
      <select name="tipo_programa" id="filtroPrograma">
        <option value="todos" {% if tipo_programa == "todos" %}selected{% endif %}>Todos</option>
        <option value="antiguo" {% if tipo_programa == "antiguo" %}selected{% endif %}>Antiguo</option>
        <option value="nuevo" {% if tipo_programa == "nuevo" %}selected{% endif %}>Nuevo</option>
      </select>
    </div>

    <div class="form-group">
      <label for="filtroCarreras">Carreras:</label>
      <select id="filtroCarreras" multiple></select>
    </div>

    <button type="submit" class="btn-admin">Aplicar filtros</button>
    <button id="btnDescargarPDF" type="button" class="btn-pdf">游닌 Descargar PDF</button>
  </form>

  <!-- 游늵 Tabla -->
  <div class="tabla-container">
    <h4>游늵 Detalle por A침o</h4>
    <table class="tabla-matricula">
      <thead>
        <tr>
          <th>A침o</th>
          <th>Programa</th>
          <th>Ene-Abr</th>
          <th>May-Ago</th>
          <th>Sep-Dic</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        {% for fila in tabla_datos %}
        <tr>
          <td>{{ fila.anio }}</td>
          <td>{{ fila.programa }}</td>
          <td>{{ fila.ene_abr }}</td>
          <td>{{ fila.may_ago }}</td>
          <td>{{ fila.sep_dic }}</td>
          <td>{{ fila.total }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- 游늳 Gr치ficas -->
  <div id="contenedorGraficas"
       data-antiguos='{{ data_antiguos_json|safe }}'
       data-nuevos='{{ data_nuevos_json|safe }}'
       data-carreras-antiguos='{{ programas_antiguos_lista|safe }}'
       data-carreras-nuevos='{{ programas_nuevos_lista|safe }}'>
    <canvas id="graficaBarras"></canvas>
    <canvas id="graficaLinea"></canvas>
    <canvas id="graficaPastel"></canvas>
    <canvas id="graficaGauss"></canvas>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script src="{% static 'js/matricula_anual.js' %}"></script>
{% endblock %}
