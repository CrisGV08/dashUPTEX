{% extends 'base.html' %}
{% load static %}

{% block title %}Evaluaci칩n Docente Concentrado{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/evaluacion_docente_concentrado.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">

<div class="admin-panel">
  <h2 class="titulo-principal">游닂 Evaluaci칩n Docente Concentrado</h2>

  <!-- Filtros -->
  <div class="filtros ocultar-en-pdf">
    <h5>Filtros</h5>
    <div class="form-group">
      <label for="select-ciclos">Seleccionar ciclos:</label>
      <select id="select-ciclos" multiple></select>
    </div>
    <div class="form-group">
      <label>Seleccionar gr치ficas:</label><br>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="linea" checked>
        <label class="form-check-label" for="linea">游늳 L칤nea</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="barras" checked>
        <label class="form-check-label" for="barras">游늵 Barras</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="pastel" checked>
        <label class="form-check-label" for="pastel">游볺 Pastel</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="gauss" checked>
        <label class="form-check-label" for="gauss">游늴 Campana de Gauss</label>
      </div>
    </div>
  </div>

  <!-- Tabla -->
  <div class="tabla-contenedor">
    <table class="table">
      <thead>
        <tr>
          <th>Ciclo</th>
          <th>Promedio</th>
        </tr>
      </thead>
      <tbody>
        {% for item in datos %}
          <tr>
            <td>{{ item.anio }}</td>
            <td>{{ item.promedio }}</td>
          </tr>
        {% endfor %}
        <tr>
          <th style="text-align:right;">Promedio General Total:</th>
          <td style="font-weight:bold; text-align:center;">{{ promedio_general_total|floatformat:2 }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Gr치ficas -->
  <div class="fila-graficas">
    <!-- Gr치ficas de Promedio Total -->
    <div class="columna-total">
      <div class="grafica-total-box" id="box-linea-total">
        <canvas id="grafica-linea-total"></canvas>
      </div>
      <div class="grafica-total-box" id="box-barras-total">
        <canvas id="grafica-barras-total"></canvas>
      </div>
      <div class="grafica-total-box" id="box-pastel-total">
        <canvas id="grafica-pastel-total"></canvas>
      </div>
      <div class="grafica-total-box" id="box-gauss-total">
        <canvas id="grafica-gauss-total"></canvas>
      </div>
    </div>

    <!-- Gr치ficas por Ciclo -->
    <div class="columna-ciclo">
      <div class="grafica-box" id="box-linea">
        <canvas id="grafica-linea"></canvas>
      </div>
      <div class="grafica-box" id="box-barras">
        <canvas id="grafica-barras"></canvas>
      </div>
      <div class="grafica-box" id="box-pastel">
        <canvas id="grafica-pastel"></canvas>
      </div>
      <div class="grafica-box" id="box-gauss">
        <canvas id="grafica-gauss"></canvas>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script>
  const datosEvaluacion = [
    {% for d in datos %}
      { ciclo: "{{ d.anio }}", promedio: {{ d.promedio }} },
    {% endfor %}
  ];
</script>
<script src="{% static 'js/evaluacion_docente_concentrado_usuario.js' %}"></script>

{% endblock %}
